{% extends "base.html" %}

{% block main %}
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">新增用户</h1>
    <form class="form-inline" role="form" id="tokenform" action="/" method="post">
      <div class="form-group">
        <input type="text" class="form-control" id="token" name="token" placeholder="请输入 token">
      </div>
    </form>
    <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group me-2" style="margin: 0 8px;">
        <a href="">
          <button type="submit" form="tokenform" class="btn btn-sm btn-outline-secondary">Refresh</button>
        </a>
      </div>
      {% if new_acc_info %}
        {% if not new_acc_info.None %}
          <div class="btn-group me-2" style="margin: 0 8px;">
            <a href="/api/acc/add/{{ new_acc_info.token }}">
              <button type="button" class="btn btn-sm btn-outline-secondary">Add</button>
            </a>
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
  {% if new_acc_info %}
    {% if not new_acc_info.None %}
      <div class="table-responsive">
        <table class="table table-striped table-sm" style="border-collapse: collapse; table-layout: fixed;">
          <thead>
            <tr>
              <th scope="col">UID</th>
              <th scope="col">名称</th>
              <th scope="col">TOKEN</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{ new_acc_info.uid }}</td>
              <td>{{ new_acc_info.nickName }}</td>
              <td>{{ new_acc_info.token }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    {% else %}
      <p>token {{ new_acc_info.None }} 无效</p>
    {% endif %}
  {% else %}
    <h2>token 获取方式</h2>
    <p>进入官网个人中心，即 https://ak.hypergryph.com/user/home</p>
    <p>按 F12 打开控制台，进入 Network 一栏，刷新该页面。在请求中找到 token_by_cookie 一项，找到其 Response 中的 token，记录下来。</p>
    <p>该 token 仅能查询官网能查到的相关数据。</p>
    <img src="https://gitee.com/RWoxiN/image-bed/raw/master/Image/202202062220152.png" height="50%" width="50%">
  {% endif %}
{% endblock %}